{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/show_candidates.css' %}"/>
{% endblock css %}

{% block content %}
    {% block navbar %}
    {% endblock navbar%}
    <form class="mt-4 mx-4 text-right no-gutters" method="post" action="{% url 'account_logout' %}">
      {% csrf_token %}
      {% if redirect_field_value %}
        <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>
      {% endif %}
        <button class="btn btn-info btn-lg" type="submit">
            <span class="glyphicon glyphicon-log-out"></span>Logout
        </button>
    </form>
    <section>
        <div class="container">
            <h1>Vote For Pakistan </h1>
{#            <div class="candidate-box justify-content-around no-gutters row text-left">#}
            <div class="row">
                {% for candidate in candidates %}
                    <div class="col-md-4">
                        <div class="card">
                            <img class="card-img-top" src="{{ candidate.candidate_picture }}" alt="{{ candidate.candidate_name }}"
                            width="200" height="400">
                            <div class="card-body" style="color: black;">
                                <h5 class="card-title candidate-name">{{ candidate.candidate_name }}</h5>
                                <p class="card-text">{{ candidate.candidate_party.party_name }}</p>
                                <p class="card-text"><span>Vote Count: </span>{{ candidate.vote_count|default:0 }}</p>
                                    <form method="post" action="{% url 'vote' %}">
                                        {% csrf_token %}
                                        {% if candidate.is_active %}
                                            <input type="submit" class="btn btn-primary" placeholder="Vote" value="Vote">
                                        {% else %}
                                            <input type="submit" class="btn btn-primary" value="Vote" disabled>
                                        {% endif %}
                                        <input type="hidden" value="{{ candidate.id }}" name="candidate_id">
                                        <input type="hidden" value="{{ candidate.candidate_party.party_name }}" name="party_name">
                                        <input type="hidden" value="{{ candidate.vote_count }}" name="vote_count">
                                    </form>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}